<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/my-read-books/styles.29a149c896afaa30eb3f.css" data-identity="gatsby-global-css">/*
! tailwindcss v3.0.7 | MIT License | https://tailwindcss.com
*/*,:after,:before{border:0 solid;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-family:SpoqaHanSansNeo-Regular,sans-serif;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}body{--tw-bg-opacity:1;--tw-text-opacity:1;background-color:rgb(247 244 238/var(--tw-bg-opacity));color:rgb(50 75 79/var(--tw-text-opacity));font-family:SpoqaHanSansNeo-Regular,sans-serif;overflow-y:scroll}*,:after,:before{--tw-border-opacity:1;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);--tw-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);border-color:rgb(229 231 235/var(--tw-border-opacity))}.scrollbar-water{scrollbar-gutter:stable}.scrollbar-water::-webkit-scrollbar{width:.25rem}.scrollbar-water::-webkit-scrollbar-track{--tw-bg-opacity:1;background-color:rgb(194 230 235/var(--tw-bg-opacity));border-radius:9999px}.scrollbar-water::-webkit-scrollbar-thumb{--tw-bg-opacity:1;background-color:rgb(83 183 199/var(--tw-bg-opacity));border-radius:9999px}.static{position:static}.fixed{position:fixed}.relative{position:relative}.top-\[2\.5vh\]{top:2.5vh}.my-\[0\.2em\]{margin-bottom:.2em;margin-top:.2em}.mx-auto{margin-left:auto;margin-right:auto}.ml-1{margin-left:.25rem}.mb-4{margin-bottom:1rem}.mb-3{margin-bottom:.75rem}.mb-2{margin-bottom:.5rem}.ml-\[calc\(var\(--main-w\)_\+_30px\)\]{margin-left:calc(var(--main-w) + 30px)}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.grid{display:grid}.aspect-\[210\/297\]{aspect-ratio:210/297}.h-full{height:100%}.h-\[260px\]{height:260px}.h-\[calc\(85vh_-_var\(--aside-h\)_-_0\.75em_-_5vh\)\]{height:calc(80vh - var(--aside-h) - .75em)}.h-\[var\(--aside-h\)\]{height:var(--aside-h)}.h-8{height:2rem}.w-\[320px\]{width:320px}.w-5\/6{width:83.333333%}.w-\[var\(--main-w\)\]{width:var(--main-w)}.max-w-\[740px\]{max-width:740px}.list-\[\"-\"\]{list-style-type:"-"}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.gap-1{gap:.25rem}.gap-3{gap:.75rem}.gap-x-2{-moz-column-gap:.5rem;column-gap:.5rem}.gap-y-8{row-gap:2rem}.overflow-y-auto{overflow-y:auto}.overscroll-contain{-ms-scroll-chaining:none;overscroll-behavior:contain}.break-all{word-break:break-all}.rounded-lg{border-radius:.5rem}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-2{border-width:2px}.border-l{border-left-width:1px}.border-b-\[10px\]{border-bottom-width:10px}.border-r{border-right-width:1px}.border-dashed{border-style:dashed}.border-\[\#c1e0ee\]{--tw-border-opacity:1;border-color:rgb(193 224 238/var(--tw-border-opacity))}.border-sunny{--tw-border-opacity:1;border-color:rgb(249 248 113/var(--tw-border-opacity))}.border-cottoncandy{--tw-border-opacity:1;border-color:rgb(254 192 218/var(--tw-border-opacity))}.border-\[\#fff6fb\]{--tw-border-opacity:1;border-color:rgb(255 246 251/var(--tw-border-opacity))}.bg-water{--tw-bg-opacity:1;background-color:rgb(212 243 248/var(--tw-bg-opacity))}.bg-deepcarrotorange{--tw-bg-opacity:1;background-color:rgb(224 114 36/var(--tw-bg-opacity))}.bg-\[\#ae8974\]{--tw-bg-opacity:1;background-color:rgb(174 137 116/var(--tw-bg-opacity))}.bg-\[\#8292ab\]{--tw-bg-opacity:1;background-color:rgb(130 146 171/var(--tw-bg-opacity))}.bg-cottoncandy{--tw-bg-opacity:1;background-color:rgb(254 192 218/var(--tw-bg-opacity))}.bg-\[url\(\.\.\/assets\/bg\.png\)\]{background-image:url(/my-read-books/static/bg-32fa5707ef9e48a5a1f2cba31ab76476.png)}.bg-\[url\(\'\.\.\/assets\/nav_bg\.png\'\)\]{background-image:url(/my-read-books/static/nav_bg-01f343a64042681207231647d2d2360e.png)}.bg-\[length\:110\%\]{background-size:110%}.bg-center{background-position:50%}.bg-right{background-position:100%}.bg-no-repeat{background-repeat:no-repeat}.p-\[2px_4px\]{padding:2px 4px}.py-3{padding-bottom:.75rem;padding-top:.75rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-bottom:.25rem;padding-top:.25rem}.pl-4{padding-left:1rem}.pr-0{padding-right:0}.pr-4{padding-right:1rem}.pl-2{padding-left:.5rem}.pl-1{padding-left:.25rem}.pt-\[90px\]{padding-top:90px}.pb-3{padding-bottom:.75rem}.pt-14{padding-top:3.5rem}.pb-20{padding-bottom:5rem}.text-center{text-align:center}.align-top{vertical-align:top}.font-topokki{font-family:SDKukdetopokki-Lt,sans-serif}.text-sm{font-size:.875rem;line-height:1.25rem}.text-\[0\.95em\]{font-size:.95em}.text-6xl{font-size:3.75rem;line-height:1}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.text-darkslategray{--tw-text-opacity:1;color:rgb(50 75 79/var(--tw-text-opacity))}.text-moonstoneblue{--tw-text-opacity:1;color:rgb(121 181 190/var(--tw-text-opacity))}.text-\[\#787673\]{--tw-text-opacity:1;color:rgb(120 118 115/var(--tw-text-opacity))}.text-mulberry{--tw-text-opacity:1;color:rgb(184 90 137/var(--tw-text-opacity))}.underline-offset-4{text-underline-offset:4px}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-filter)}.transition-\[background-color\2c color\]{transition-duration:.15s;transition-property:background-color,color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-\[background-size\]{transition-duration:.15s;transition-property:background-size;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-150{transition-duration:.15s}.keep-all{word-break:keep-all}.\[background-position\:calc\(50\%_\+_210px\)_-80px\]{background-position:calc(50% + 210px) -80px}.\[--main-w\:680px\]{--main-w:680px}.\[--aside-h\:64px\]{--aside-h:64px}.marker\:text-\[\#00ACD2\] ::marker{--tw-text-opacity:1;color:rgb(0 172 210/var(--tw-text-opacity))}.marker\:text-\[\#00ACD2\]::marker{--tw-text-opacity:1;color:rgb(0 172 210/var(--tw-text-opacity))}.hover\:text-deepcarrotorange:hover{--tw-text-opacity:1;color:rgb(224 114 36/var(--tw-text-opacity))}.hover\:duration-500:hover{transition-duration:.5s}.group:hover .group-hover\:bg-\[length\:120\%\]{background-size:120%}.group:hover .group-hover\:underline{-webkit-text-decoration-line:underline;text-decoration-line:underline}@font-face{font-family:SDKukdetopokki-Lt;font-style:normal;font-weight:400;src:url(/my-read-books/static/SDKukdetopokki-aLt00-732c0338329fae74147c6332dc11dd94.woff) format("woff")}@font-face{font-family:SpoqaHanSansNeo-Regular;font-style:normal;font-weight:400;src:url(/my-read-books/static/SpoqaHanSansNeo-Regular-4af655e2b88a518cc85c7033fdfe1aa3.woff) format("woff")}@font-face{font-family:BRBA_B;font-style:normal;font-weight:400;src:url(/my-read-books/static/BRBA_B-1dd0436cef08ebf5ec4c32ec3e9bdca7.woff) format("woff")}.markdown{line-height:1.625}.markdown h1,.markdown h2,.markdown h3,.markdown h4,.markdown h5,.markdown h6{--tw-text-opacity:1;color:rgb(0 172 143/var(--tw-text-opacity));font-family:BRBA_B,sans-serif}.markdown h1,.markdown h2{--tw-border-opacity:1;border-bottom-color:rgb(195 193 188/var(--tw-border-opacity));border-bottom-width:1px;border-style:dashed;margin-bottom:1rem;margin-top:3rem;padding-bottom:.5rem}.markdown h3,.markdown h4{margin-bottom:.75rem;margin-top:2rem}.markdown h5,.markdown h6{--tw-text-opacity:1;color:rgb(101 94 78/var(--tw-text-opacity));margin-bottom:.75rem;margin-top:1.5rem}.markdown h1{font-size:1.875rem;line-height:2.25rem}.markdown h2{font-size:1.5rem;line-height:2rem}.markdown h3{font-size:1.25rem;line-height:1.75rem}.markdown h4{font-size:1.125rem;line-height:1.75rem}.markdown ol,.markdown ul{list-style-position:outside;margin-bottom:.75rem;padding-left:2rem}.markdown ol:is(ul),.markdown ul:is(ul){list-style-type:disc}.markdown ol:is(ol),.markdown ul:is(ol){list-style-type:decimal}.markdown ol ul,.markdown ul ul{list-style-type:circle}.markdown ol :is(ol,ul) ul,.markdown ul :is(ol,ul) ul{list-style-type:square}.markdown ol ol,.markdown ul ol{list-style-type:lower-roman}.markdown ol :is(ol,ul) ol,.markdown ul :is(ol,ul) ol{list-style-type:lower-alpha}.markdown p{margin-bottom:.75rem}.markdown a[href]{--tw-text-opacity:1;color:rgb(172 142 0/var(--tw-text-opacity));-webkit-text-decoration-line:underline;text-decoration-line:underline}.markdown strong{--tw-text-opacity:1;color:rgb(224 114 36/var(--tw-text-opacity))}.markdown hr{--tw-border-opacity:1;border-bottom-color:rgb(195 193 188/var(--tw-border-opacity));border-width:0;border-bottom-width:1px;border-style:dashed;margin-bottom:.75rem}.markdown kbd{--tw-border-opacity:1;--tw-bg-opacity:1;background-color:rgb(246 248 250/var(--tw-bg-opacity));border-color:rgb(213 216 218/var(--tw-border-opacity));border-radius:.5rem;border-width:1px;font-size:.875rem;line-height:1.25rem;margin-left:.25rem;margin-right:.25rem;padding:2px}.markdown img{display:inline-block;vertical-align:text-bottom}.markdown :not(pre)>code{--tw-bg-opacity:1;background-color:rgb(230 221 202/var(--tw-bg-opacity));border-radius:.25rem;font-family:SDKukdetopokki-Lt,sans-serif;font-size:.875rem;line-height:1.25rem;padding-bottom:2px;padding-left:.25rem;padding-right:.25rem;padding-top:2px}.markdown blockquote{--tw-border-opacity:1;--tw-text-opacity:1;border-color:rgb(230 221 202/var(--tw-border-opacity));border-left-width:4px;color:rgb(101 94 78/var(--tw-text-opacity));margin-bottom:.75rem;padding-left:1rem}.markdown pre{border-radius:.25rem;margin-bottom:.75rem;overflow:auto;padding:1rem}.markdown pre code{display:inline-block}.markdown table{margin-bottom:.75rem}.markdown table td,.markdown table th{--tw-border-opacity:1;border-color:rgb(195 193 188/var(--tw-border-opacity));border-width:1px;padding-bottom:.5rem;padding-left:1rem;padding-right:1rem;padding-top:.5rem}.markdown table tr:nth-child(2n){--tw-bg-opacity:1;background-color:rgb(230 221 202/var(--tw-bg-opacity))}</style><meta name="generator" content="Gatsby 4.4.0"/><title data-react-helmet="true">쿠버네티스 완벽 가이드 - 요약</title><link rel="icon" href="/my-read-books/favicon-32x32.png?v=a3a6a542c7f5896f70536c2863ac5193" type="image/png"/><link rel="manifest" href="/my-read-books/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#00ac8f"/><link rel="apple-touch-icon" sizes="48x48" href="/my-read-books/icons/icon-48x48.png?v=a3a6a542c7f5896f70536c2863ac5193"/><link rel="apple-touch-icon" sizes="72x72" href="/my-read-books/icons/icon-72x72.png?v=a3a6a542c7f5896f70536c2863ac5193"/><link rel="apple-touch-icon" sizes="96x96" href="/my-read-books/icons/icon-96x96.png?v=a3a6a542c7f5896f70536c2863ac5193"/><link rel="apple-touch-icon" sizes="144x144" href="/my-read-books/icons/icon-144x144.png?v=a3a6a542c7f5896f70536c2863ac5193"/><link rel="apple-touch-icon" sizes="192x192" href="/my-read-books/icons/icon-192x192.png?v=a3a6a542c7f5896f70536c2863ac5193"/><link rel="apple-touch-icon" sizes="256x256" href="/my-read-books/icons/icon-256x256.png?v=a3a6a542c7f5896f70536c2863ac5193"/><link rel="apple-touch-icon" sizes="384x384" href="/my-read-books/icons/icon-384x384.png?v=a3a6a542c7f5896f70536c2863ac5193"/><link rel="apple-touch-icon" sizes="512x512" href="/my-read-books/icons/icon-512x512.png?v=a3a6a542c7f5896f70536c2863ac5193"/><link as="script" rel="preload" href="/my-read-books/webpack-runtime-c969ff4522f87484c155.js"/><link as="script" rel="preload" href="/my-read-books/framework-9a6e7a47ea4c73dc108f.js"/><link as="script" rel="preload" href="/my-read-books/app-8da00f419a851a757cc3.js"/><link as="script" rel="preload" href="/my-read-books/commons-20878c9d516bd5f6fbb9.js"/><link as="script" rel="preload" href="/my-read-books/component---src-templates-book-tsx-f2d27771f1a8289eb8cb.js"/><link as="fetch" rel="preload" href="/my-read-books/page-data/books/쿠버네티스-완벽-가이드/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/my-read-books/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main class="[--main-w:680px] [--aside-h:64px] w-[var(--main-w)] mx-auto relative"><div><div class="fixed ml-[calc(var(--main-w)_+_30px)] top-[2.5vh] flex flex-col gap-3"><nav class="bg-water py-3 pl-4 pr-0 w-[320px] rounded-lg h-[calc(85vh_-_var(--aside-h)_-_0.75em_-_5vh)]"><div class="overflow-y-auto text-sm break-all h-full overscroll-contain scrollbar-water pr-4"><ul class=""><li class=""><a href="#1장-도커-복습과-hello-kubernetes" class="inline-block px-1 align-top rounded bg-deepcarrotorange text-white transition-[background-color,color] duration-150">1장 도커 복습과 Hello, Kubernetes</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#11-도커복습" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">1.1 도커복습</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#111-도커-컨테이너란" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">1.1.1 도커 컨테이너란?</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#112-도커-컨테이너-설계" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">1.1.2 도커 컨테이너 설계</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#1-컨테이너당-1-프로세스" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">1 컨테이너당 1 프로세스</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#변경-불가능한-인프라immutable-infrastructure-이미지로-생성" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">변경 불가능한 인프라(Immutable Infrastructure) 이미지로 생성</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#경량의-도커-이미지로-생성한다" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">경량의 도커 이미지로 생성한다.</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#실행-계정은-root-이외의-사용자로-한다" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">실행 계정은 root 이외의 사용자로 한다.</a></li></ul></li><li class="text-[0.95em] ml-1 pl-1"><a href="#113-도커-파일-작성법" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">1.1.3 도커 파일 작성법</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#114-도커-이미지-빌드" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">1.1.4 도커 이미지 빌드</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#멀티-스테이지-빌드" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">멀티 스테이지 빌드</a></li></ul></li><li class="text-[0.95em] ml-1 pl-1"><a href="#115-이미지-레이어-통합과-이미지-축소화" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">1.1.5 이미지 레이어 통합과 이미지 축소화</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#116-도커-레지스트리로-이미지-업로드" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">1.1.6 도커 레지스트리로 이미지 업로드</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#117-컨테이너-기동" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">1.1.7 컨테이너 기동</a></li></ul></li></ul></li></ul></li><li class=""><a href="#2장-왜-쿠버네티스가-필요할까" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2장 왜 쿠버네티스가 필요할까?</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#21-쿠버네티스란" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.1 쿠버네티스란?</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#22-쿠버네티스의-역사" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.2 쿠버네티스의 역사</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#23-쿠버네티스를-사용하면-무엇을-할-수-있을까" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.3 쿠버네티스를 사용하면 무엇을 할 수 있을까?</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#231-선언적-코드를-사용한-관리iac" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.3.1 선언적 코드를 사용한 관리(IaC)</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#232-스케일링오토-스케일링" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.3.2 스케일링/오토 스케일링</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#233-스케줄링" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.3.3 스케줄링</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#234-리소스-관리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.3.4 리소스 관리</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#235-자동화된-복구" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.3.5 자동화된 복구</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#236-로드-밸런싱과-서비스-디스커버리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.3.6 로드 밸런싱과 서비스 디스커버리</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#237-데이터-관리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.3.7 데이터 관리</a></li></ul></li><li class="text-[0.95em] ml-1 pl-1"><a href="#24-정리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">2.4 정리</a></li></ul></li><li class=""><a href="#3장-쿠버네티스-환경-선택" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">3장 쿠버네티스 환경 선택</a></li><li class=""><a href="#4장-api-리소스와-kubectl" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4장 API 리소스와 kubectl</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#41-이-책을-읽기-위한-준비" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.1 이 책을 읽기 위한 준비</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#42-쿠버네티스-기초" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.2 쿠버네티스 기초</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#43-쿠버네티스와-리소스" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.3 쿠버네티스와 리소스</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#431-워크로드-api-카테고리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.3.1 워크로드 API 카테고리</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#432-서비스-api-카테고리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.3.2 서비스 API 카테고리</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#433-컨피그--스토리지-api-카테고리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.3.3 컨피그 &amp; 스토리지 API 카테고리</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#434-클러스터-api-카테고리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.3.4 클러스터 API 카테고리</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#435-메타데이터-api-카테고리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.3.5 메타데이터 API 카테고리</a></li></ul></li><li class="text-[0.95em] ml-1 pl-1"><a href="#44-네임스페이스로-가상적인-클러스터-분리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.4 네임스페이스로 가상적인 클러스터 분리</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#저자-추천" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">저자 추천</a></li></ul></li><li class="text-[0.95em] ml-1 pl-1"><a href="#45-커맨드-라인-인터페이스cli-도구-kubectl" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5 커맨드 라인 인터페이스(CLI) 도구 kubectl</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#451-인증-정보와-컨텍스트config" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.1 인증 정보와 컨텍스트(config)</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#452-kubectxkubens를-사용한-전환" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.2 kubectx/kubens를 사용한 전환</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#453-매니페스트와-리소스-생성삭제갱신" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.3 매니페스트와 리소스 생성/삭제/갱신</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#454-리소스-생성에도-kubectl-apply를-사용해야-하는-이유" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.4 리소스 생성에도 kubectl apply를 사용해야 하는 이유</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#455-server-side-apply" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.5 Server-side apply</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#456-파드-재기동" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.6 파드 재기동</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#457-generatename으로-임의의-이름을-가진-리소스-생성" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.7 generateName으로 임의의 이름을 가진 리소스 생성</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#458-리소스-상태-체크와-대기wait" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.8 리소스 상태 체크와 대기(wait)</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#459-매니페스트-파일-설계" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.9 매니페스트 파일 설계</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#하나의-매니페스트-파일에-여러-리소스를-정의" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">하나의 매니페스트 파일에 여러 리소스를 정의</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#여러-매니페스트-파일을-동시에-적용" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">여러 매니페스트 파일을 동시에 적용</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#매니페스트-파일-설계-방침" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">매니페스트 파일 설계 방침</a></li></ul></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4510-어노테이션과-레이블" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.10 어노테이션과 레이블</a><ul class="pl-2 my-[0.2em] border-l border-[#c1e0ee] list-[&quot;-&quot;] marker:text-[#00ACD2]"><li class="text-[0.95em] ml-1 pl-1"><a href="#어노테이션" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">어노테이션</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#레이블" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">레이블</a></li></ul></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4511-alpha-prune을-사용한-리소스-삭제--prune-옵션" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.11 Alpha Prune을 사용한 리소스 삭제: -prune 옵션</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4512-편집기로-편집-edit" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.12 편집기로 편집: edit</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4513-리소스-일부-정보-업데이트-set" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.13 리소스 일부 정보 업데이트: set</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4514-로컬-매니페스트와-쿠버네티스-등록-정보-비교-출력-diff" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.14 로컬 매니페스트와 쿠버네티스 등록 정보 비교 출력: diff</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4515-사용-가능한-리소스-종류의-목록-가져오기-api-resources" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.15 사용 가능한 리소스 종류의 목록 가져오기: api-resources</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4516-리소스-정보-가져오기-get" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.16 리소스 정보 가져오기: get</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4517-리소스-상세-정보-가져오기-describe" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.17 리소스 상세 정보 가져오기: describe</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4518-실제-리소스-사용량-확인-top" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.18 실제 리소스 사용량 확인: top</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4519-컨테이너에서-명령어-실행-exec" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.19 컨테이너에서 명령어 실행: exec</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4520-alpha-파드에-디버깅용-임시-컨테이너-추가-debug" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.20 Alpha 파드에 디버깅용 임시 컨테이너 추가: debug</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4521-로컬-머신에서-파드로-포트-포워딩-port-forward" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.21 로컬 머신에서 파드로 포트 포워딩: port-forward</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4522-컨테이너-로그-확인-logs" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.22 컨테이너 로그 확인: logs</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4523-스턴을-사용한-로그-확인" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.23 스턴을 사용한 로그 확인</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4524-컨테이너와-로컬-머신-간의-파일-복사-cp" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.24 컨테이너와 로컬 머신 간의 파일 복사: cp</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4526-kubectl에서-디버깅" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.26 kubectl에서 디버깅</a></li><li class="text-[0.95em] ml-1 pl-1"><a href="#4527-kubectl의-기타-팁" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.5.27 kubectl의 기타 팁</a></li></ul></li><li class="text-[0.95em] ml-1 pl-1"><a href="#46-정리" class="inline-block px-1 align-top rounded hover:text-deepcarrotorange">4.6 정리</a></li></ul></li></ul></div></nav><aside class="bg-cottoncandy bg-[url(&#x27;../assets/nav_bg.png&#x27;)] bg-no-repeat bg-right h-[var(--aside-h)] rounded-lg border-cottoncandy border-2 flex justify-start items-center px-4 gap-3"><a class="text-sm text-mulberry py-1 group" href="/my-read-books/">📚<span class="font-topokki group-hover:underline underline-offset-4 ml-1">책 목록으로</span></a><span class="border-r border-[#fff6fb] border-dashed block h-8"></span><button class="text-sm text-mulberry py-1 group">☝️<span class="font-topokki group-hover:underline underline-offset-4 ml-1">위로 가자!</span></button></aside></div><article class="markdown"><h1 id="1장-도커-복습과-hello-kubernetes">1장 도커 복습과 Hello, Kubernetes</h1><h2 id="11-도커복습">1.1 도커복습</h2><p>알아야 할 도커지식</p><ul><li>컨테이너 설계</li><li>파일 작성법</li><li>이미지 빌드</li><li>레지스트리로 이미지 푸시</li></ul><h3 id="111-도커-컨테이너란">1.1.1 도커 컨테이너란?</h3><ul><li>컨테이너는 도커 이미지를 기반으로 실행되는 프로세스</li><li>환경의 영향을 받지 않아 이식성이 높다</li></ul><h3 id="112-도커-컨테이너-설계">1.1.2 도커 컨테이너 설계</h3><ul><li>1 컨테이너당 1 프로세스</li><li>변경 불가능한 인프라(Immutable Infrastructure) 이미지로 생성한다.</li><li>경량의 도커 이미지로 생성한다.</li><li>실행 계정은 root 이외의 사용자로 한다.</li></ul><h4 id="1-컨테이너당-1-프로세스">1 컨테이너당 1 프로세스</h4><ul><li>관례임으로 안지키면 도커의 에코시스템과 맞지않아 관리가 힘들어짐.</li></ul><h4 id="변경-불가능한-인프라immutable-infrastructure-이미지로-생성">변경 불가능한 인프라(Immutable Infrastructure) 이미지로 생성</h4><ul><li>컨테이너 기동 후에 외부 실행 바이너리, 또는 외부 패키지를 설치하면 컨테이너 실행 결과가 달라질 수 있음.</li><li>관련 리소스를 가능한 이미지에 포함시켜 최대한 일관된 결과를 보장</li></ul><h4 id="경량의-도커-이미지로-생성한다">경량의 도커 이미지로 생성한다.</h4><ul><li>도커 이미지가 무거우면 (다운로드를 통해 이미지를 가져오기 때문에) 배포가 느려짐.</li><li>빌드 단계에서만 사용되는 패키지를 제거, 경량 배포판(알파인, scratch) 이미지를 사용, 도커 빌드 레이어 수를 줄이는 등등의 방법 있음.</li></ul><h4 id="실행-계정은-root-이외의-사용자로-한다">실행 계정은 root 이외의 사용자로 한다.</h4><ul><li>보안사고 예방</li></ul><h3 id="113-도커-파일-작성법">1.1.3 도커 파일 작성법</h3><p><img src="https://user-images.githubusercontent.com/16894698/144852587-09ac6947-45c8-46b3-8a99-3b820f423f5b.png" alt="image"/></p><ul><li><code>FROM</code>에서는 기반이 되는 도커 이미지를 지정</li><li><code>COPY</code> 명령으로 빌드할 머신에 있는 파일을 컨테이너에 복사</li><li><code>RUN</code> 명령은 빌드 시에 컨테이너에서 명령어를 실행</li><li><code>ENTRYPOINT</code> 명령과 <code>CMD</code> 명령은 컨테이너가 기동할 때 실행하는 명령어</li><li><code>ENTRYPOINT</code>에 기본적으로 바꿀 필요가 없는 부분을 정의</li><li><code>CMD</code>에 기본값 인수 등을 정의</li></ul><p><img src="https://user-images.githubusercontent.com/16894698/144852649-3efeccf4-c219-43c8-996d-3ed55a964f99.png" alt="image"/>
<img src="https://user-images.githubusercontent.com/16894698/144852672-d7d2d266-4d5e-40e6-862d-23963e70b1a6.png" alt="image"/></p><h4 id="114-도커-이미지-빌드">1.1.4 도커 이미지 빌드</h4><ul><li>docker image build 명령어를 사용</li><li><code>-t</code> 옵션으로 이미지의 이름과 태그를 지정</li><li>태그는 버전을 지정하는 것이 일반적</li></ul><h5 id="멀티-스테이지-빌드">멀티 스테이지 빌드</h5><p><img src="https://user-images.githubusercontent.com/16894698/144852726-1aeb2854-d997-46b8-9015-f85b27f17659.png" alt="image"/></p><ul><li>여러 컨테이너 이미지를 사용해 빌드하고 결과물만 실행용 컨테이너 이미지에 복사</li><li>이미지가 경량화되고 보안측면도 더 나음.</li><li>빌드킷(<a href="https://github.com/moby/buildkit">https://github.com/moby/buildkit</a>) 등으로 빌드 의존 관계를 자동 파악해 병렬 처리하는 것도 가능</li></ul><h4 id="115-이미지-레이어-통합과-이미지-축소화">1.1.5 이미지 레이어 통합과 이미지 축소화</h4><ul><li>다이브(<a href="https://github.com/wagoodman/dive)%EB%A1%9C">https://github.com/wagoodman/dive)로</a> 레이어의 용량 소비를 조사 가능함.</li><li>docker image build 시 <code>--squash</code>옵션을 사용하면 한 개의 레이어로 통합 (아직 실험적 experimental 기능)</li></ul><h4 id="116-도커-레지스트리로-이미지-업로드">1.1.6 도커 레지스트리로 이미지 업로드</h4><ul><li>레지스트리는 도커 이미지를 보관하는 저장소 서버</li><li>되도록 비공식 이미지 보단 공식 이미지를 사용할 것을 권장</li></ul><p><img src="https://user-images.githubusercontent.com/16894698/144852896-99f3caa4-4c31-47ee-b260-ea444eb89561.png" alt="image"/></p><h4 id="117-컨테이너-기동">1.1.7 컨테이너 기동</h4><ul><li>쿠버네티스를 사용하면 직접 도커 명령어를 사용하지 않음</li></ul><p><img src="https://user-images.githubusercontent.com/16894698/144853083-c4baea0d-4a52-4a54-a711-ca6a748b17e7.png" alt="image"/></p><h1 id="2장-왜-쿠버네티스가-필요할까">2장 왜 쿠버네티스가 필요할까?</h1><h2 id="21-쿠버네티스란">2.1 쿠버네티스란?</h2><ul><li>애플리케이션의 배포, 확장 등을 관리하는 것을 자동화하기 위한 플랫폼</li><li>도커(단독으로)는 여러 도커 호스트를 동시에 동작, 통합 관리하는 기능을 제공하지 않음</li></ul><h2 id="22-쿠버네티스의-역사">2.2 쿠버네티스의 역사</h2><ul><li>구글이 내부적으로 사용하던 컨테이너 클러스터 관리 도구 Borg에서 파생된 오픈 소스</li><li>리눅스 재단 산하의 클라우드 네이티브 컴퓨팅 파운데이션(CNCF)으로 이관</li><li>사실상 표준이 된 배경에는 대형 클라우드 사업자(구글, 애저, 아마존등)가 쿠버네티스 관리형 서비스를 제공한다는 점 때문</li></ul><h2 id="23-쿠버네티스를-사용하면-무엇을-할-수-있을까">2.3 쿠버네티스를 사용하면 무엇을 할 수 있을까?</h2><ul><li>여러 쿠버네티스 노드 관리</li><li>컨테이너 스케줄링</li><li>롤링 업데이트</li><li>스케일링/오토 스케일링</li><li>컨테이너 모니터링</li><li>자동화된 복구</li><li>서비스 디스커버리</li><li>로드 밸런싱</li><li>데이터 관리</li><li>워크로드 관리</li><li>로그 관리</li><li>선언적 코드를 사용한 관리</li><li>그 외 에코시스템과의 연계 및 확장</li></ul><h3 id="231-선언적-코드를-사용한-관리iac">2.3.1 선언적 코드를 사용한 관리(IaC)</h3><p>YAML, JSON 형식으로 작성한 선언적 코드(매니페스트)로 리소스를 관리</p><h3 id="232-스케일링오토-스케일링">2.3.2 스케일링/오토 스케일링</h3><p>같은 이미지 기반의 컨테이너 수를 자동으로 늘리거나 줄여 부하를 분산함</p><h3 id="233-스케줄링">2.3.3 스케줄링</h3><p>어피니티, 안티어피니티(<a href="https://kubernetes.io/ko/docs/concepts/scheduling-eviction/assign-pod-node/#%EC%96%B4%ED%94%BC%EB%8B%88%ED%8B%B0-affinity-%EC%99%80-%EC%95%88%ED%8B%B0-%EC%96%B4%ED%94%BC%EB%8B%88%ED%8B%B0-anti-affinity)%EC%9D%84">https://kubernetes.io/ko/docs/concepts/scheduling-eviction/assign-pod-node/#%EC%96%B4%ED%94%BC%EB%8B%88%ED%8B%B0-affinity-%EC%99%80-%EC%95%88%ED%8B%B0-%EC%96%B4%ED%94%BC%EB%8B%88%ED%8B%B0-anti-affinity)을</a> 사용해 워크로드 특징이나 노드 성능을 기준으로 컨테이너를 어느 노드에 배치할 것인지 제어 가능.</p><h3 id="234-리소스-관리">2.3.4 리소스 관리</h3><ul><li>(따로 스케줄링 설정이 없으면) 노드의 CPU나 메모리의 여유 리소스 상태에 따라 자동 스케줄링</li><li>리소스 상태에 따라 자동적으로 클러스터에 노드 추가나 삭제도 가능</li></ul><h3 id="235-자동화된-복구">2.3.5 자동화된 복구</h3><ul><li>컨테이너 프로세스 정지를 감지하면 자동 재배포</li><li>노드가 제거되도 컨테이너를 다른 노드로 자동 복구함</li></ul><h3 id="236-로드-밸런싱과-서비스-디스커버리">2.3.6 로드 밸런싱과 서비스 디스커버리</h3><ul><li>로드 밸런서 기능(서비스, 인그레스)을 제공</li><li>컨테이너의 확장, 업데이트, 또는 장애가 발생했을 때 필요한 엔드 포인트 서비스 변경 작업(컨테이너 등록, 삭제, 분리등)을 자동 수행</li><li>서비스 디스커버리 기능으로 복수의 서비스간 연계가 쉬움. (마이크로 서비스 구축 용이)</li></ul><h3 id="237-데이터-관리">2.3.7 데이터 관리</h3><ul><li>내부 백엔드 데이터 스토어로 etcd 사용</li><li>안전하고 이중화된 상태로 중앙 집중 관리</li></ul><h2 id="24-정리">2.4 정리</h2><p>쿠버네티스를 사용하면 컨테이너의 이동성과 경량화를 활용한 빠른 개발과 전체 시스템의 배포 자동화를 구현할 수 있다.</p><h1 id="3장-쿠버네티스-환경-선택">3장 쿠버네티스 환경 선택</h1><blockquote><p>생략합니다. 나중에 여유 있으면 하겠음</p></blockquote><h1 id="4장-api-리소스와-kubectl">4장 API 리소스와 kubectl</h1><h2 id="41-이-책을-읽기-위한-준비">4.1 이 책을 읽기 위한 준비</h2><ul><li>CLI 도구인 kubectl을 설치</li><li>쿠버네티스 클러스터 생성</li></ul><h2 id="42-쿠버네티스-기초">4.2 쿠버네티스 기초</h2><ul><li>쿠버네티스는 k8s <code>마스터</code>와 k8s <code>노드</code>로 구성</li><li>k8s <code>마스터</code>는 API 엔드포인트 제공, 컨테이너 스케줄링, 스케일링 등을 담당</li><li>k8s <code>노드</code>는 컨테이너를 기동시키는 노드</li><li>kubectl이 매니페스트 파일(YAML,JSON)을 바탕으로 쿠버네티스 마스터에 리소스를 등록</li></ul><h2 id="43-쿠버네티스와-리소스">4.3 쿠버네티스와 리소스</h2><h3 id="431-워크로드-api-카테고리">4.3.1 워크로드 API 카테고리</h3><p>컨테이너를 기동하기 위해 사용되는 리소스. 내부적으로 사용하는 것외 사용자가 직접 관리할 수 있는 것은 아래 8가지.</p><ul><li>파드(Pod)</li><li>레플리케이션 컨트롤러(ReplicationController)</li><li>레플리카셋(ReplicaSet)</li><li>디플로이먼트(Deployment)</li><li>데몬셋(DaemonSet)</li><li>스테이트풀셋(StatefulSet)</li><li>잡(Job)</li><li>크론잡(CronJob)</li></ul><h3 id="432-서비스-api-카테고리">4.3.2 서비스 API 카테고리</h3><p>서비스 디스커버리와 클러스터 외부 접속이 가능한 엔드포인트 제공하는 리소스.</p><ul><li>서비스<ul><li>ClusterIP</li><li>ExternalIP(ClusterIP의 한 종류)</li><li>NodePort</li><li>LoadBalancer</li><li>Headless(None)</li><li>ExternalName</li><li>None-Selector</li></ul></li><li>인그레스</li></ul><h3 id="433-컨피그--스토리지-api-카테고리">4.3.3 컨피그 &amp; 스토리지 API 카테고리</h3><p>설정과 기밀 데이터를 컨테이너에 담거나 영구 볼륨을 제공하는 리소스.</p><ul><li>시크릿(Secret)</li><li>컨피그맵(ConfigMap)</li><li>영구 볼륨 클레임(PersistentVolumeClaim)</li></ul><h3 id="434-클러스터-api-카테고리">4.3.4 클러스터 API 카테고리</h3><p>클러스터 동작(보안 관련 설정이나 정책, 클러스터 관리성을 향상시키는 기능)을 정의하는 리소스.</p><ul><li>노드(Node)</li><li>네임스페이스(Namespace)</li><li>영구 볼륨(PersistentVolume)</li><li>리소스 쿼터(ResourceQuota)</li><li>서비스 어카운트(ServiceAccount)</li><li>롤(Role)</li><li>클러스터 롤(ClusterRole)</li><li>롤바인딩(RoleBinding)</li><li>클러스터롤바인딩(ClusterRoleBinding)</li><li>네트워크 정책(NetworkPolicy)</li></ul><h3 id="435-메타데이터-api-카테고리">4.3.5 메타데이터 API 카테고리</h3><p>내부의 다른 리소스 동작을 제어하기 위한 리소스.</p><ul><li>LimitRange</li><li>HorizontalPodAutoscaler(HPA)</li><li>PodDisruptionBudget(PDB)</li><li>커스텀 리소스 데피니션(CustomResourceDefinition)</li></ul><h2 id="44-네임스페이스로-가상적인-클러스터-분리">4.4 네임스페이스로 가상적인 클러스터 분리</h2><ul><li>네임스페이스는 가상적인 쿠버네티스 클러스터 분리 기능</li><li>하나의 클러스터를 여러 팀에서 사용하거나 서비스/스테이징/개발 환경으로 구분하는 경우 사용</li><li>클러스터를 (여러 팀에서) 공용으로 사용하지 않고 시스템이 단순하면 기본 네임스페이스만 사용하는 것도 괜찮음.</li></ul><h3 id="저자-추천">저자 추천</h3><p>아래 3가지 이유로 저자는 서비스/스테이징/개발 환경으로 나누는 용도 보단 마이크로서비스를 개발하는 팀 단위로 나눌 것을 추천.</p><ul><li>클러스터 장애시 모든 환경에서 장애가 나는 것을 격리, 차단할 수 있음.</li><li>매니페스트 파일 재사용성이 떨어짐. (같은 리소스임에도 prod 매니페스트랑 dev 매니페스트로 나뉨)</li><li>위와 같은 이유로 같은 리소스의 서비스 주소가 달라짐. (ex, SERVICE.prod.svc.cluster.local과 SERVICE.dev.svc.cluster.local)</li></ul><h2 id="45-커맨드-라인-인터페이스cli-도구-kubectl">4.5 커맨드 라인 인터페이스(CLI) 도구 kubectl</h2><p><img src="https://user-images.githubusercontent.com/16894698/144881755-a322f405-761e-4388-8e0b-11c7fbedd5f8.png" alt="image"/></p><p>CLI 도구인 <code>kubectl</code>을 사용해 마스터의 API 요청을 보내 클러스터를 조작</p><h3 id="451-인증-정보와-컨텍스트config">4.5.1 인증 정보와 컨텍스트(config)</h3><p><img src="https://user-images.githubusercontent.com/16894698/144882042-b1316538-a47d-498e-8baf-5ae6e25416bf.png" alt="image"/></p><ul><li>쿠버네티스 마스터와 통신할 때 필요한 접속 대상의 서버, 인증 정보.</li><li><code>clusters</code>, <code>users</code>, <code>contexts</code> 3가지 정보로 구성</li><li><code>clusters</code>는 접속 대상 클러스터 정보</li><li><code>users</code>는 사용자 인증 정보</li><li><code>contexts</code>는 사용할 cluster와 user, 네임스페이스 조합.</li><li>조합된 컨텍스트를 전환해, 여러 환경을 여러 권한으로 조작 가능</li></ul><p><img src="https://user-images.githubusercontent.com/16894698/144882150-0bb07f83-1d4b-4228-8fdf-978306aa14e8.png" alt="image"/>
<img src="https://user-images.githubusercontent.com/16894698/144882167-b27f112e-80e0-4dc6-b984-1c83d4bea939.png" alt="image"/>
<img src="https://user-images.githubusercontent.com/16894698/144882084-45deade3-d6aa-441a-8f8a-badd219c638f.png" alt="image"/></p><h3 id="452-kubectxkubens를-사용한-전환">4.5.2 kubectx/kubens를 사용한 전환</h3><p>kubectx/kubens(<a href="https://github.com/ahmetb/kubectx">https://github.com/ahmetb/kubectx</a>) 사용하면 컨텍스트, 네임스페이스 전환이 kubectl 명령어를 사용하는 것 보다 편리함.</p><p><img src="https://user-images.githubusercontent.com/16894698/144882215-e5648a0a-c1e6-4005-b6a7-f1c30c1b8bad.png" alt="image"/>
<img src="https://user-images.githubusercontent.com/16894698/144882226-1c4ae232-41d4-4691-81ce-a5b1152ef6f1.png" alt="image"/></p><h3 id="453-매니페스트와-리소스-생성삭제갱신">4.5.3 매니페스트와 리소스 생성/삭제/갱신</h3><ul><li>리소스를 생성할 때는 kubectl <code>create</code> 명령어</li><li>생성한 파드는 kubectl <code>get pods</code> 명령어로 확인 가능</li><li>삭제할 때는 kubectl <code>delete</code> 명령어</li><li><code>--wait</code> 옵션은 리소스 처리가 끝나고 명령어가 종료됨. (기본은 명령어가 비동기로 실행, 기다리지 않는다)</li><li>즉시 강제 삭제는 <code>--force</code> 옵션</li><li>리소스 업데이트는 kubectl <code>apply</code> 명령어</li><li>기존 리소스가 없을 때 kubectl <code>apply</code>는 kubectl <code>create</code>와 동일</li><li>kubectl <code>create</code> 따로 사용하는 것 보단 kubectl <code>apply</code>로 통일하는 것이 편리</li><li>(특정 리소스 경우) 최초 생성 후에 kubectl apply로 변경할 수 없는 필드도 존재함.</li></ul><h3 id="454-리소스-생성에도-kubectl-apply를-사용해야-하는-이유">4.5.4 리소스 생성에도 kubectl apply를 사용해야 하는 이유</h3><ol><li>kubectl apply에 create 기능이 포함되어 있어서 애초 구분이 불필요.</li><li>k8s는 필드삭제를 이전 매니페스트와 적용될 다음 매니페스트를 비교해 정하는데 create는 이전 매니페스트 정보를 저장하지 않아서 필드 삭제가 누락될 수 있음.</li></ol><p><img src="https://user-images.githubusercontent.com/16894698/144882458-cf2e027f-01df-4089-905f-8dd5b5e4ce3f.png" alt="image"/>
<img src="https://user-images.githubusercontent.com/16894698/144882489-0126bb7f-f5ad-4db9-9e11-2c53418a8a3c.png" alt="image"/></p><h3 id="455-server-side-apply">4.5.5 Server-side apply</h3><ul><li>클라이언트(kubectl)에서 변경사항을 계산해 요청을 보내기 때문에 (Client-side apply) 여러 사용자가 동시에 같은 필드를 변경하는 경우 경합 현상이 발생.</li><li>kubectl 이름을 기록하고 서버 측에서 변경 사항을 계산, 충돌 감지하는 기능 (Server-side apply) 도입</li><li>충돌 감지만 제공할 뿐, 해결은 사용자가 직접 해야함.</li><li><code>--server-side</code> 옵션을 사용</li><li>동일한 kubectl일지라도 강제로 <code>--field-manager</code> 옵션을 통해 kubectl 이름을 바꿔 충돌감지가 가능함.</li></ul><blockquote><p>개인생각 노트: 충돌 해결을 직접해야 하기 때문에 여러 사용자가 동일한 리소스를 관리해야 한다면 매니페스트에 대한 버전 관리가 필요해보임 (argocd?)</p></blockquote><p><img src="https://user-images.githubusercontent.com/16894698/144882540-200807c9-d3bc-4c0e-a9ec-3c2930c2f86b.png" alt="image"/></p><h3 id="456-파드-재기동">4.5.6 파드 재기동</h3><ul><li><code>rollout restart</code>로 디플로이먼트 등의 리소스와 연결되어 있는 모든 파드를 재기동.</li><li>단독 파드에서는 사용할 수 없음.</li></ul><blockquote><p>개인생각 노트: 롤 아웃이 레플리카셋과 같은 여러 팟 그룹을 swap하면서 이뤄지기 때문에 단독 팟보다 더 높은 추상화 리소스가 요구되는 것 아닌가하는?</p></blockquote><p><img src="https://user-images.githubusercontent.com/16894698/144882580-b9f0e031-b17d-43a1-93a2-ca1db3260473.png" alt="image"/></p><h3 id="457-generatename으로-임의의-이름을-가진-리소스-생성">4.5.7 generateName으로 임의의 이름을 가진 리소스 생성</h3><ul><li>kubectl create로 리소스 생성시, <code>generateName</code> 값에 난수를 붙여 팟 이름을 자동생성</li><li>kubectl apply에서는 사용할 수 없음.</li></ul><blockquote><p>개인생각 노트: apply에서 사용할 수 없는 이윤 아마 본래 기존 리소스를 수정하는 기능이니깐 매번 새로 난수 이름 생성하는 내용을 허용하게 되면 본래 기능이 무의미해지기 때문인듯?</p></blockquote><h3 id="458-리소스-상태-체크와-대기wait">4.5.8 리소스 상태 체크와 대기(wait)</h3><ul><li>kubectl <code>wait</code> 명령어는 리소스가 지정한 상태가 될 때까지 대기함.</li><li><code>--for</code>옵션 뒤에 상태 지정</li><li><code>--timeout</code> 옵션으로 최대 대기 시간 지정 (기본은 30초)</li><li>리소스 대신 매니페스트 파일이 대상이 될 때, (매니페스트의) 모든 리소스가 같은 상태가 될 때 까지 대기함.</li></ul><h3 id="459-매니페스트-파일-설계">4.5.9 매니페스트 파일 설계</h3><h4 id="하나의-매니페스트-파일에-여러-리소스를-정의">하나의 매니페스트 파일에 여러 리소스를 정의</h4><ul><li>파드를 기동하는 워크로드 리소스와 외부에 공개하는 서비스 리소스를 묶어 하나의 매니페스트 파일로 정의하는 것이 일반적</li><li>실행 순서를 정확하게 지켜야 하거나 리소스 간의 결합도를 높일 때 하나로 정의</li><li>공통으로 사용되는 리소스(컨피그맵, 시크릿)는 별도 매니페스트로 분리</li><li>위에서부터 정의된 리소스 순서대로 적용됨.</li><li>중간에 문법 에러등으로 중단 시, 이후 리소스는 적용되지 않음.</li></ul><h4 id="여러-매니페스트-파일을-동시에-적용">여러 매니페스트 파일을 동시에 적용</h4><ul><li>kubectl <code>apply</code> 실행 시, 디렉토리 지정 가능</li><li>파일명 순으로 적용 (순서를 지켜야하면 파일명 앞에 실행순서 넘버링)</li><li><code>-R</code> 옵션은 하위 디렉토리의 매니페스트 파일까지 재귀적으로 적용됨.</li><li>문법 에러등으로 중단 시, 중단된 파일의 이후 리소스는 마찬가지 적용되지 않으나 다른 매니페스트는 적용함.</li></ul><h4 id="매니페스트-파일-설계-방침">매니페스트 파일 설계 방침</h4><ul><li>많이 쓰이는 3가지 패턴<ul><li>규모가 크지 않을 경우 디렉토리 하나로 관리하는 패턴</li><li>서브시스템, 부서별, 내부정책에 따른 그루핑등으로 나눠 관리하는 패턴</li><li>마이크로서비스 별로 나눠 관리하는 패턴 (서비스간 적용순서를 제어하기 어려움)</li></ul></li><li>개발 팀의 구성(조직별로 변경 가능한 범위등)을 고려하는 것도 중요<ul><li>개발 조직도와 매니페스트 관리구조가 서로 유사하게 구성됨.</li></ul></li></ul><p><img src="https://user-images.githubusercontent.com/16894698/144942125-67fe4adc-fce4-49f1-9f6e-65d882ae2ff3.png" alt="image"/>
<img src="https://user-images.githubusercontent.com/16894698/144942179-b3f9e464-17dc-4745-b8bb-de2f9e234414.png" alt="image"/>
<img src="https://user-images.githubusercontent.com/16894698/144942194-a8116c59-6615-4510-907f-43893f7ed08c.png" alt="image"/></p><h3 id="4510-어노테이션과-레이블">4.5.10 어노테이션과 레이블</h3><h4 id="어노테이션">어노테이션</h4><h4 id="레이블">레이블</h4><h3 id="4511-alpha-prune을-사용한-리소스-삭제--prune-옵션">4.5.11 Alpha Prune을 사용한 리소스 삭제: -prune 옵션</h3><h3 id="4512-편집기로-편집-edit">4.5.12 편집기로 편집: edit</h3><h3 id="4513-리소스-일부-정보-업데이트-set">4.5.13 리소스 일부 정보 업데이트: set</h3><h3 id="4514-로컬-매니페스트와-쿠버네티스-등록-정보-비교-출력-diff">4.5.14 로컬 매니페스트와 쿠버네티스 등록 정보 비교 출력: diff</h3><h3 id="4515-사용-가능한-리소스-종류의-목록-가져오기-api-resources">4.5.15 사용 가능한 리소스 종류의 목록 가져오기: api-resources</h3><h3 id="4516-리소스-정보-가져오기-get">4.5.16 리소스 정보 가져오기: get</h3><h3 id="4517-리소스-상세-정보-가져오기-describe">4.5.17 리소스 상세 정보 가져오기: describe</h3><h3 id="4518-실제-리소스-사용량-확인-top">4.5.18 실제 리소스 사용량 확인: top</h3><h3 id="4519-컨테이너에서-명령어-실행-exec">4.5.19 컨테이너에서 명령어 실행: exec</h3><h3 id="4520-alpha-파드에-디버깅용-임시-컨테이너-추가-debug">4.5.20 Alpha 파드에 디버깅용 임시 컨테이너 추가: debug</h3><h3 id="4521-로컬-머신에서-파드로-포트-포워딩-port-forward">4.5.21 로컬 머신에서 파드로 포트 포워딩: port-forward</h3><h3 id="4522-컨테이너-로그-확인-logs">4.5.22 컨테이너 로그 확인: logs</h3><h3 id="4523-스턴을-사용한-로그-확인">4.5.23 스턴을 사용한 로그 확인</h3><h3 id="4524-컨테이너와-로컬-머신-간의-파일-복사-cp">4.5.24 컨테이너와 로컬 머신 간의 파일 복사: cp</h3><h3 id="4526-kubectl에서-디버깅">4.5.26 kubectl에서 디버깅</h3><h3 id="4527-kubectl의-기타-팁">4.5.27 kubectl의 기타 팁</h3><h2 id="46-정리">4.6 정리</h2></article></div></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/books/쿠버네티스-완벽-가이드";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-342cc9799dc1ad23796d.js"],"app":["/app-8da00f419a851a757cc3.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-a6503d3932565e5aa5a1.js"],"component---src-templates-book-tsx":["/component---src-templates-book-tsx-f2d27771f1a8289eb8cb.js"]};/*]]>*/</script><script src="/my-read-books/polyfill-342cc9799dc1ad23796d.js" nomodule=""></script><script src="/my-read-books/component---src-templates-book-tsx-f2d27771f1a8289eb8cb.js" async=""></script><script src="/my-read-books/commons-20878c9d516bd5f6fbb9.js" async=""></script><script src="/my-read-books/app-8da00f419a851a757cc3.js" async=""></script><script src="/my-read-books/framework-9a6e7a47ea4c73dc108f.js" async=""></script><script src="/my-read-books/webpack-runtime-c969ff4522f87484c155.js" async=""></script></body></html>